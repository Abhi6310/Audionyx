<style>
/* PAGE LAYOUT w/ PURPLE ANIMATION */
  body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: linear-gradient(45deg, #d1a7f7, #8e44ad, #4b2e83, #2c1b56);
    background-size: 200% 200%; /* Expands the background area for smooth transitions */
    animation: gradientAnimation 15s ease infinite; /* Animation definition */
    font-family: Arial, sans-serif;
  }

  /* Keyframes for the animated gradient */
@keyframes gradientAnimation {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}


/* General Layout Styles */
.library-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

/* Section Styles */
.mt-5 {
  margin-top: 50px;
}

.upload-section {
  background-color: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 40px;
}

.upload-section h3 {
  font-size: 2rem;
  color: #5e2a8c;
  margin-bottom: 20px;
}

.upload-section h5 {
  font-size: 1.25rem;
  color: #6c757d;
  margin-bottom: 15px;
}

.upload-section label {
  font-size: 1rem;
  color: #333;
  margin-bottom: 5px;
  display: block;
}

.upload-section select, 
.upload-section input[type="text"] {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-size: 1rem;
}

.upload-section input[type="file"]:focus {
  border-color: #5e2a8c;
}

.upload-section button[type="submit"] {
  background-color: #5e2a8c;
  color: white;
  font-size: 1.1rem;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.upload-section button[type="submit"]:hover {
  background-color: #4b1f7a;
}

/* Custom File Upload Button */
.btn-upload {
  display: inline-block;
  background-color: #5e2a8c;
  color: white;
  font-size: 1rem;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  text-align: center;
  border: none;
  transition: background-color 0.3s ease;
  margin-bottom: 15px;
}

.btn-upload:hover {
  background-color: #4b1f7a;
}

.upload-section input[type="file"]:hover {
  cursor: pointer;
}

</style>


<div class="library-container">
  <!-- Upload Section -->
  <div class="mt-5">
    <div class="upload-section">
      <h3>{{username}}'s Library</h3>
      
      <!-- Conversion Form -->
      <h5>Add to library</h5>
      <form action="/convert" method="post" enctype="multipart/form-data">
        <!-- Dropdown to select source -->
        <label for="source">Select Source:</label>
        <select id="source" name="source" required>
          <option value="" disabled selected>Select Source</option>
          <option value="youtube">YouTube</option>
          <option value="spotify">Spotify</option>
          <option value="local">Local MP3 File</option> <!-- Option to upload locally -->
        </select>

        <!-- URL input based on source selected -->
        <label for="url">Enter URL:</label>
        <input type="text" id="url" name="url" placeholder="Enter the URL" required>

        <!-- File input for uploading local MP3 file -->
        <div class="form-group mb-3">
          <input type="file" id="file" name="file" accept=".mp3" class="form-control-file"  style="display: none;">
          <button type="button" class="btn btn-secondary mt-2" onclick="document.getElementById('file').click()">Upload MP3 File</button>
        </div>
        <button type="submit" class="btn btn-primary">Convert & Add</button>
      </form>
    </div>

    <!-- Music Library Table -->
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Title</th>
          <th>Genre</th>
          <th>File Type</th>
          <th>Play/Remove</th>
        </tr>
      </thead>
      <tbody>
        {{#each results}}
        <tr>
          <td>{{this.title}}</td>
          <td>{{this.genre}}</td>
          <td>{{this.filetype}}</td>
          <td>
            <!-- Play Button -->
            <button class="btn btn-success btn-sm" onclick="playSong('{{this.fileUrl}}')">Play</button>
            <!-- Delete Button -->
            <form action="/delete/{{this.id}}" method="post" style="display:inline-block;">
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
          </td>
        </tr>
        {{else}}
        <!-- Display an empty row if no results are available -->
        <tr>
          <td colspan="4" class="text-center">No music in library yet</td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>
